{"version":3,"sources":["file:///D:/program/cocos/project/FlappyBird/assets/scripts/PipeSpawner.ts"],"names":["_decorator","Component","instantiate","math","Prefab","Pipe","ccclass","property","PipeSpawner","timer","_isSpawning","update","deltaTime","spawnRate","pipeInst","pipePrefab","node","addChild","p","getWorldPosition","setWorldPosition","y","randomRangeInt","pLoca","getPosition","setPosition","x","pause","nodeArray","children","i","length","pipe","getComponent","enabled","start"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAYC,MAAAA,M,OAAAA,M;;AAChDC,MAAAA,I,iBAAAA,I;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;6BAGjBQ,W,WADZF,OAAO,CAAC,aAAD,C,UAEHC,QAAQ,CAACH,MAAD,C,2BAFb,MACaI,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAO/BQ,KAP+B,GAOlB,CAPkB;AAAA,eAQ/BC,WAR+B,GAQX,KARW;AAAA;;AASvCC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AAC1B,cAAG,KAAKF,WAAL,IAAkB,KAArB,EAA4B;AAC3B,eAAKD,KAAL,IAAYG,SAAZ;;AACA,cAAG,KAAKH,KAAL,GAAW,KAAKI,SAAnB,EAA6B;AAC1B,iBAAKJ,KAAL,GAAW,CAAX;AACA,kBAAMK,QAAQ,GAACZ,WAAW,CAAC,KAAKa,UAAN,CAA1B;AACA,iBAAKC,IAAL,CAAUC,QAAV,CAAmBH,QAAnB,EAH0B,CAI1B;;AACA,kBAAMI,CAAC,GAAC,KAAKF,IAAL,CAAUG,gBAAV,EAAR;AACAL,YAAAA,QAAQ,CAACM,gBAAT,CAA0BF,CAA1B;AACA,kBAAMG,CAAC,GAAGlB,IAAI,CAACmB,cAAL,CAAoB,CAAC,GAArB,EAA0B,EAA1B,CAAV;AACA,kBAAMC,KAAK,GAACT,QAAQ,CAACU,WAAT,EAAZ;AACAV,YAAAA,QAAQ,CAACW,WAAT,CAAqBF,KAAK,CAACG,CAA3B,EAA8BL,CAAC,GAAC,GAAhC;AACF;AACD;;AACMM,QAAAA,KAAK,GAAE;AACV,eAAKjB,WAAL,GAAiB,KAAjB;AACA,gBAAMkB,SAAS,GAAC,KAAKZ,IAAL,CAAUa,QAA1B;;AACA,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,SAAS,CAACG,MAAxB,EAA+BD,CAAC,EAAhC,EAAmC;AAC/B,kBAAME,IAAI,GAACJ,SAAS,CAACE,CAAD,CAAT,CAAaG,YAAb;AAAA;AAAA,6BAAX;;AACA,gBAAGD,IAAH,EAAQ;AACJ;AACAA,cAAAA,IAAI,CAACE,OAAL,GAAa,KAAb;AACH;AACJ;AACJ;;AACMC,QAAAA,KAAK,GAAE;AACV,eAAKzB,WAAL,GAAiB,IAAjB;AACH;;AArCsC,O;;;;;iBAErB,I;;oFAEjBH,Q;;;;;iBACgB,C","sourcesContent":["import { _decorator, Component, instantiate, math, Node, Prefab } from 'cc';\r\nimport { Pipe } from './Pipe';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PipeSpawner')\r\nexport class PipeSpawner extends Component {\r\n    @property(Prefab)\r\n    pipePrefab:Prefab=null\r\n\r\n    @property\r\n    spawnRate:number=2\r\n\r\n    private timer:number=0\r\n    private _isSpawning:boolean=false\r\n    update(deltaTime: number) {\r\n    if(this._isSpawning==false) return\r\n     this.timer+=deltaTime\r\n     if(this.timer>this.spawnRate){\r\n        this.timer=0\r\n        const pipeInst=instantiate(this.pipePrefab);\r\n        this.node.addChild(pipeInst)\r\n        // 管道可以上下改变高度\r\n        const p=this.node.getWorldPosition()\r\n        pipeInst.setWorldPosition(p)\r\n        const y = math.randomRangeInt(-250, 50);\r\n        const pLoca=pipeInst.getPosition()\r\n        pipeInst.setPosition(pLoca.x, y-619);\r\n     }   \r\n    }\r\n    public pause(){\r\n        this._isSpawning=false\r\n        const nodeArray=this.node.children\r\n        for(let i=0;i<nodeArray.length;i++){\r\n            const pipe=nodeArray[i].getComponent(Pipe)\r\n            if(pipe){\r\n                // 禁用组件\r\n                pipe.enabled=false\r\n            }\r\n        }\r\n    }\r\n    public start(){\r\n        this._isSpawning=true\r\n    }\r\n}\r\n\r\n\r\n"]}